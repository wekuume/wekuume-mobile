<ion-side-menus enable-menu-with-back-views="false">
  <ion-side-menu-content>
    <ion-nav-bar class="bar-stable" align-title="center" class="bar bar-stable">
      <ion-nav-back-button>
      </ion-nav-back-button>

      <ion-nav-buttons side="left">
        <div class="buttons">
          <a class="button button-icon icon ion-ios-bookmarks-outline" menu-toggle="left" ng-click="toQueue()"><span class="badge badge-assertive header-badge">{{no_of_incomplete_units}}</span></a>
        </div>
        <h1 class="title">Wekuume</h1>
        <div class="buttons">
          <a class="button button-icon icon ion-ios-search" ng-click="showFilterBar()" href="javascript:void(0);"></a>
        </div>
      </ion-nav-buttons>
    </ion-nav-bar>
    <ion-view view-title="Wekuume">
      <ion-header-bar >
      </ion-header-bar>

      <ion-content class="topic-list">        
        <ion-refresher
          pulling-text="Pull to refresh..."
          on-refresh="refreshTopics()">
        </ion-refresher>
        <div class="item item-divider" ng-click="showLearn()">
          <span class="title">Learn</span>
        </div>
        <div class="card topic-card list" ng-repeat="topic in practice" ng-show="learnVisible" >
          <div class="item item-image"  ng-show="topic.image" ng-click="toggleUnits(topic)">
            <img ng-src="img/{{topic.image}}">
          </div>
          <ion-item class="item-stable item-icon-right" ng-click="toggleUnits(topic)">
            <!-- <i class="icon ion-flag item-icon-left" ng-if="topic.kind == 'practice'"></i>
            <i class="icon ion-wrench item-icon-left" ng-if="topic.kind == 'tool'"></i> -->
            <!-- <i class="icon ion-university item-icon-left" ng-if="topic.kind == 'understand'"></i> -->
            <span class="title">{{topic.title}}</span>
            <a class="button  button-icon icon ion-android-download item-icon-right" ng-show="(!topic.isDownloaded)" ng-click="downloadTopic(topic)"></a>
            <a class="button  button-icon icon item-icon-right" ng-show="(topic.isDownloaded)" ng-class="{'ion-arrow-down-b': !topic.showUnits, 'ion-arrow-up-b': topic.showUnits }"></a>
          </ion-item>
          <ion-item class="item item-icon-right" ng-class="{'item-looks-disabled':!topic.isDownloaded}" ng-repeat="unit in topic.units" ng-click="(topic.isDownloaded ? openUnit(unit.slug) : downloadTopic(topic))" ng-show="(topic.showUnits || unit.isVisible)">
            <i class="icon unit-icon" ng-class="{'ion-android-download':!topic.isDownloaded,'ion-chevron-right':topic.isDownloaded}"></i>
            {{unit.title}}
          </ion-item>
          <a class="item item-divider item-alert item-icon-right item-download" ng-click="downloadTopic(topic)" ng-show="(!topic.isLatest && topic.isDownloaded)">Click to download an update for this lesson<i class="segment-button-right button-icon icon ion-android-download"></i></a>
        </div>

        <div class="item item-divider" ng-click="showTools()">
          Tools
        </div>
        <div class="card topic-card list" ng-repeat="topic in tool" ng-show="toolsVisible" >
          <div class="item item-image"  ng-show="topic.image" ng-click="toggleUnits(topic)">
            <img ng-src="img/{{topic.image}}">
          </div>
          <ion-item class="item-stable item-icon-right" ng-click="toggleUnits(topic)">
            <!-- <i class="icon ion-flag item-icon-left" ng-if="topic.kind == 'practice'"></i>
            <i class="icon ion-wrench item-icon-left" ng-if="topic.kind == 'tool'"></i> -->
            <!-- <i class="icon ion-university item-icon-left" ng-if="topic.kind == 'understand'"></i> -->
            <span class="title">{{topic.title}}</span>
            <a class="button  button-icon icon ion-android-download item-icon-right" ng-show="(!topic.isDownloaded)" ng-click="downloadTopic(topic)"></a>
            <a class="button  button-icon icon item-icon-right" ng-show="(topic.isDownloaded)" ng-class="{'ion-arrow-down-b': !topic.showUnits, 'ion-arrow-up-b': topic.showUnits }"></a>
          </ion-item>
          <ion-item class="item item-icon-right" ng-class="{'item-looks-disabled':!topic.isDownloaded}" ng-repeat="unit in topic.units" ng-click="(topic.isDownloaded ? openUnit(unit.slug) : downloadTopic(topic))" ng-show="(topic.showUnits || unit.isVisible)">
            <i class="icon unit-icon" ng-class="{'ion-android-download':!topic.isDownloaded,'ion-chevron-right':topic.isDownloaded}"></i>
            {{unit.title}}
          </ion-item>
          <a class="item item-divider item-alert item-icon-right item-download" ng-click="downloadTopic(topic)" ng-show="(!topic.isLatest && topic.isDownloaded)">Click to download an update for this lesson<i class="segment-button-right button-icon icon ion-android-download"></i></a>
        </div>

        <div class="item item-divider" ng-click="showKnowledge()">
          Knowledge
        </div>
        <div class="card topic-card list" ng-repeat="topic in understand" ng-show="knowledegeVisble" >
          <div class="item item-image"  ng-show="topic.image" ng-click="toggleUnits(topic)">
            <img ng-src="img/{{topic.image}}">
          </div>
          <ion-item class="item-stable item-icon-right" ng-click="toggleUnits(topic)">
            <!-- <i class="icon ion-flag item-icon-left" ng-if="topic.kind == 'practice'"></i>
            <i class="icon ion-wrench item-icon-left" ng-if="topic.kind == 'tool'"></i> -->
            <!-- <i class="icon ion-university item-icon-left" ng-if="topic.kind == 'understand'"></i> -->
            <span class="title">{{topic.title}}</span>
            <a class="button  button-icon icon ion-android-download item-icon-right" ng-show="(!topic.isDownloaded)" ng-click="downloadTopic(topic)"></a>
            <a class="button  button-icon icon item-icon-right" ng-show="(topic.isDownloaded)" ng-class="{'ion-arrow-down-b': !topic.showUnits, 'ion-arrow-up-b': topic.showUnits }"></a>
          </ion-item>
          <ion-item class="item item-icon-right" ng-class="{'item-looks-disabled':!topic.isDownloaded}" ng-repeat="unit in topic.units" ng-click="(topic.isDownloaded ? openUnit(unit.slug) : downloadTopic(topic))" ng-show="(topic.showUnits || unit.isVisible)">
            <i class="icon unit-icon" ng-class="{'ion-android-download':!topic.isDownloaded,'ion-chevron-right':topic.isDownloaded}"></i>
            {{unit.title}}
          </ion-item>
          <a class="item item-divider item-alert item-icon-right item-download" ng-click="downloadTopic(topic)" ng-show="(!topic.isLatest && topic.isDownloaded)">Click to download an update for this lesson<i class="segment-button-right button-icon icon ion-android-download"></i></a>
        </div>

      </ion-content>
    </ion-view>
  </ion-side-menu-content>

  <ion-side-menu side="left">
    <ion-header-bar class="bar-stable">
      <h1 class="title">Keep Learning</h1>
    </ion-header-bar>
    <ion-content>
      <ion-list>
        <div class="item item-divider">
          In Progress
        </div>
        <a class="item" ng-click="openUnit(unit.slug)" ng-repeat="unit in incompleteUnits">
          <h2>{{unit.title}}</h2>
          <p>{{unit.parentTitle}}</p>           
        </a>
        <div class="item item-divider">
          Learn More
        </div>
        <ion-item ng-repeat="unit in suggestedUnits">
          <h2>{{unit.title}}</h2>
          <p>{{unit.parentTitle}}</p>
          <ion-option-button class="button-info"
                             ng-click="deleteSuggestion(unit)">
            Remove
          </ion-option-button>
        </ion-item>
      </ion-list>
    </ion-content>
  </ion-side-menu>
</ion-side-menus>
